import com.manning.gia.smoke.HttpSmokeTest

ext {
    tomcatUrl = "http://$config.server.hostname:$config.server.port"
    toDoAppUrl = "$tomcatUrl/$config.server.context"
}

task checkTomcatUrl(type: HttpSmokeTest) {
    url = tomcatUrl
    errorMessage = "Tomcat doesn't seem to be up."
}

task checkApplicationUrl(type: HttpSmokeTest, dependsOn: checkTomcatUrl) {
    url = toDoAppUrl
    errorMessage = "Application doesn't seem to be up."
}

task smokeTests(dependsOn: checkApplicationUrl)

task urlcheck {
	doLast {
		println toDoAppUrl
	}
}